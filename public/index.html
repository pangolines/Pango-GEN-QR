<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Pango Gen QR</title>


    <link rel="stylesheet" type="text/css" href="styles/inline.css">
    <link rel="stylesheet" type="text/css" href="styles/materialize.css">

    <link rel="stylesheet" type="text/css" href="styles/login_form.css">

    <script type="text/javascript" src="scripts/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="scripts/jquery.qrcode.min.js"></script>

    <link rel="manifest" href="/manifest.json">

    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Weather PWA">
    <link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
    <!-- Windows -->
    <meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2F3BA2">

    <link rel="icon"
         type="image/png"
         href="images/icons/icon-144x144.png">





    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>

    <!-- Add additional services you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-functions.js"></script>

    <!-- Comment out (or don't include) services you don't want to use -->
    <!-- <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-storage.js"></script> -->

    <script src="https://www.gstatic.com/firebasejs/5.4.2/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "mmm",
        authDomain: "pango-gen-qr.firebaseapp.com",
        databaseURL: "https://pango-gen-qr.firebaseio.com",
        projectId: "pango-gen-qr",
        storageBucket: "pango-gen-qr.appspot.com",
        messagingSenderId: "mm"
      };
      firebase.initializeApp(config);
    </script>
    
<script>
  // var config = {
  //   // ...
  // };
  // firebase.initializeApp(config);


  function onCreateUser() {
    
    let email    = document.getElementById("uname").value
    let password = document.getElementById("psw").value

    email = "pangolines.ninja@gmail.com"
    password = "PangolinesNinja123"

    console.log(email)
    console.log(password)

    // Es el alta del usuario en Firebase!
    firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;

          console.log("error: " + errorCode)
          console.log("errorMessage: " +errorMessage)
      // ...
    });

  }

  function onLogin() {
    
    let email    = document.getElementById("uname").value
    let password = document.getElementById("psw").value

    email = "pangolines.ninja@gmail.com"
    password = "PangolinesNinja123"

    console.log(email)
    console.log(password)

    // LOGIN
    firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;


      console.log("Error login user" + errorCode + " rr " + errorMessage )
      // ...
    });

  }



  function onLogout() {
    
    let email    = document.getElementById("uname").value
    let password = document.getElementById("psw").value

    email = "pangolines.ninja@gmail.com"
    password = "PangolinesNinja123"

    console.log(email)
    console.log(password)

    firebase.auth().signOut().then(function() {
      // Sign-out successful.
      console.log("Chau user")
    }).catch(function(error) {
      // An error happened.
      console.log("Que paso ??")
    });

  }



</script>

  </head>
  <body>

    <header class="header">
      <h1 style="text-align: center;" class="header__title">Pango GEN QR (v3)</h1>
    </header>

    <main class="main">
      <div style="text-align: center;" class="container">

        <div class="card">
          <div id="qrcode"></div>
        </div>

        <div class="row">

          <form class="col s12">
            <div class="row">
              <div class="input-field col s12">
                <hr>
                Enter your message or link for the QR Code
                <input id="qrCodeMessage" type="text" class="validate">
              </div>
            </div>
            <div class="row">
              <div class="grid-example col s12">
                <button class="waves-effect waves-light btn-large" id="buttonGenerate" type="button" name="button">
                  Generate QR Code
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>



    <h2>Login Form</h2>

    
      <div class="imgcontainer">
        <img src="img_avatar2.png" alt="Avatar" class="avatar">
      </div>
    
      <div class="container">
        <label for="uname"><b>Username</b></label>
        <input type="text" placeholder="Enter Username" name="uname" id="uname" required>
    
        <label for="psw"><b>Password</b></label>
        <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
            
        <button type="button" onclick="javascript:onCreateUser()">Create User</button><br/>
        <button type="button" onclick="javascript:onLogin()">Login User</button><br/>
        <button type="button" onclick="javascript:onLogout()">Logout User</button><br/>

      </div>
    



    <script type="text/javascript" src="scripts/app.js"></script>
  </body>
</html>
